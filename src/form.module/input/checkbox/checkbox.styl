$nz-checkbox-size ?= nz-local-grid-size(5)
$nz-checkbox-padding ?= 0 nz-local-grid-size(4)

$nz-checkbox-small-size ?= nz-local-grid-size(4)
$nz-checkbox-small-padding ?= 0 nz-local-grid-size(4)


.nz-checkbox
  display: inline-flex
  user-select: none
  cursor: pointer

  &[label-position="before"]
    .nz-checkbox-label
      flex-direction: row-reverse

    .nz-checkbox-input + .nz-checkbox-content:not(:empty)
      margin-right: nz-local-grid-size(2)

  &.nz-checkbox-checked
    .nz-checkbox-indicator
        opacity: 1

    &:not(.nz-checkbox-indeterminate)
      .nz-checkbox-checkmark
        border: solid alpha($theme.accent.on.normal, 0.8)
        border-width: 0 2px 2px 0
        width: 6px
        height: 11px
        opacity: 1
        transform: rotate(45deg)
        top: 3px
        left: 7px

    &.nz-checkbox-indeterminate
      .nz-checkbox-checkmark
        border: 5px solid $theme.accent.normal
        nz-rounded-rect: 10px, 10px, small
        opacity: 1
        transform: rotate(0deg)
        top: 5px
        left: 5px

      .nz-checkbox-indicator
        background-color: transparent

  &[color~="dark"], &
    .nz-checkbox-border
      border-color: $theme.base.on.normal

    .nz-checkbox-content
      color: $theme.base.on.normal


  &[color~="light"]
    .nz-checkbox-border
      border-color: $theme.base.normal

    .nz-checkbox-content
      color: $theme.base.normal


  &[disabled]
    cursor: default
    pointer-events: none

    &.nz-checkbox-checked
      &:not(.nz-checkbox-indeterminate)
        .nz-checkbox-indicator
          background-color: $theme.common.light

      &.nz-checkbox-indeterminate
        .nz-checkbox-checkmark
          border-color: $theme.common.light

    .nz-checkbox-content
      opacity: 0.3 !important

    .nz-checkbox-border
      border-color: $theme.common.light

  &[variant=small]
    transform-origin: center center !important
    transform: scale(unit($nz-checkbox-small-size / $nz-checkbox-size, '')) !important


.nz-checkbox-label
  display: inline-flex
  justify-content: flex-start
  align-items: flex-start
  pointer-events: none
  max-width: 100%


.nz-checkbox-border
  display: inline-block
  position: absolute
  top: 0
  left: 0
  nz-rounded-rect: $nz-checkbox-size, $nz-checkbox-size, small
  border-width: 2px
  border-style: solid


.nz-checkbox-content
  display: inline-block
  flex: 1 0 auto
  position: relative
  top: 2px
  overflow: hidden
  max-width: 100%

.nz-checkbox-input
  display: inline-block
  position: relative
  width: $nz-checkbox-size
  height: $nz-checkbox-size
  flex: 0 0 auto

  & + .nz-checkbox-content:not(:empty)
    margin-left: nz-local-grid-size(2)

  pointer-events: none


.nz-checkbox-indicator
  display: inline-block
  position: absolute
  top: 0
  left: 0
  nz-rounded-rect: $nz-checkbox-size, $nz-checkbox-size, small
  background-color: $theme.accent.normal
  opacity: 0
  transition: 250ms opacity, 250ms background-color

.nz-checkbox-checkmark
  display: inline-block
  position: absolute
  opacity: 0
  transition: 250ms opacity, 250ms transform, 250ms width, 250ms height, 250ms border
