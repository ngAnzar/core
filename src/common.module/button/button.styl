@require "../../util"

$nz-button-padding ?= 0 nz-local-grid-size(4)
$nz-button-min-width ?= nz-local-grid-size(22)
$nz-button-height ?= nz-local-grid-size(9)


.nz-button, .nz-fab, .nz-icon-button
  cursor: pointer
  outline: none
  border: none
  user-select: none
  -webkit-tap-highlight-color: transparent

  &::-moz-focus-inner
    border: 0
    padding: 0

  nz-typo: $typo.button

  box-sizing: border-box
  position: relative

  display: inline-flex
  flex-wrap: nowrap
  justify-content: center
  align-items: center

  white-space: nowrap
  text-decoration: none
  vertical-align: baseline
  text-align: center

  margin: 0
  padding: 0
  overflow: hidden
  transition: box-shadow 250ms

  .nz-icon + :not(.nz-icon)
    position: relative
    top: 1px


// themes + variants

.nz-button, .nz-fab
  //nz-component-variants()
  nz-theme-component-states($include:"base" "hover" "disabled")

/*
.nz-button:not([disabled]), .nz-fab:not([disabled])
  &[variant~="raised"]
    nz-elevation: 2

  &.cdk-keyboard-focused, &.cdk-program-focused
    nz-elevation: 5


  background-color: $theme.base.state.normal
  color: $theme.base.state.on.normal

  &:hover .nz-ripple
    background-color: $theme.base.state.hover
    color: $theme.base.state.on.hover

    .nz-ripple-effect
      background-color: $theme.base.state.ripple

  &[variant~="filled"]
    background-color: $theme.primary.state.normal
    color: $theme.primary.state.on.normal

    &:hover .nz-ripple
      background-color: $theme.primary.state.hover
      color: $theme.primary.state.on.hover

      .nz-ripple-effect
        background-color: $theme.base.state.ripple

  for $color, $value in nz-theme-colors($theme)
    &{'[color="' + $color + '"]'}
      background-color: $theme.base.state.normal
      color: $value.state.on.normal

      &:hover .nz-ripple
        background-color: $value.state.hover
        color: $value.state.on.hover

        .nz-ripple-effect
          background-color: $value.state.ripple

      &[variant~="filled"]
        background-color: $value.normal
        color: $value.on.normal

        &:hover .nz-ripple
          background-color: $theme.primary.state.hover
          color: $theme.primary.state.on.hover

          .nz-ripple-effect
            background-color: $theme.base.state.ripple
*/
  /*
  &:not([color])

    &[variant~="filled"]
      color: $theme.background.tri-state.normal.fg
      background-color: $theme.foreground.tri-state.normal.bg

      &:hover
        color: $theme.background.tri-state.hover.fg
        background-color: $theme.background.tri-state.hover.bg

      .nz-ripple
        background-color: $theme.background.default

    &:not([variant~="filled"])
      color: $theme.foreground.tri-state.normal.fg

      &:hover
        color: $theme.foreground.tri-state.hover.fg
        background-color: $theme.foreground.tri-state.hover.bg

      .nz-ripple
        background-color: $theme.foreground.default

  for color, value in nz-theme-colors($theme)
    &{'[color="' + color + '"]'}
      color: value.tri-state.normal.fg

      &[variant~="filled"]
        color: value.on.default
        background-color: value.default

        .nz-ripple
          background-color: #FFF

      &:not([variant~="filled"])
        &:hover
          color: value.tri-state.hover.fg
          background-color: value.tri-state.hover.bg

        .nz-ripple
          background-color: value.default
  */

/*
.nz-button[disabled]
  color: $theme.base.state.disabled
  cursor: default

  &[variant~="filled"]
    color: $theme.disabled.on.default
    background-color: $theme.disabled.default
*/

.nz-button
  min-width: $nz-button-min-width
  padding: $nz-button-padding

  nz-rounded-rect: auto, $nz-button-height, small


.nz-fab
  padding: 0

  &[variant~="small"], &
    nz-circle: (nz-local-grid-size(9) / 2)

  &[variant~="medium"]
    nz-circle: (nz-local-grid-size(12) / 2)

  &[variant~="large"]
    nz-circle: (nz-local-grid-size(15) / 2)

  &[position="BR"]
    position: absolute
    bottom: nz-local-grid-size(6)
    right: nz-local-grid-size(6)
  &[position="TR"]
    position: absolute
    top: nz-local-grid-size(6)
    right: nz-local-grid-size(6)

.nz-button-bar
  padding: nz-local-grid-size(2)
  display: flex
  background-color: rgba(0, 0, 0, 0.1)


.nz-fab-menu
  display: flex
  flex-direction: column
