:stylus
  @require "../list/list"

  .list
    display: inline-grid
    grid-template-columns: 1fr

  .item
    cursor: pointer
    user-select: none
    grid-column: 1
    padding: 0 12px !important

  .action
    font-style: italic

  .scroller
    display: inline-grid

  .notfound
    height: 48px
    color: $theme.common.dark
    padding: 0 12px !important


div(fxFlex="grow", fxLayout="column inline")

  .notfound(*ngIf="source.storage && source.storage.isEmpty && !source.storage.isBusy", fxFlex="none", fxLayout="row", fxLayoutAlign="start center")
    i Nem található

  //- TODO: loading anim

  .nz-scroller.scroller(#scroller, *ngIf="source.storage", fxFlex="grow")
    .nz-list.list(#list bind-style.gridTemplateRows="gridTemplateRows", scrollable)
      ng-template(bind-ngIf="actionsByPosition.first")
        ng-template(ngFor bind-ngForOf="actionsByPosition.first" let-action let-index="index")
          .nz-list-item.item.action(bind-style.gridRow="index + 1" bind-selectableAction="action.model" bind-selectionIndex="index + 1")
            ng-template(bind-ngTemplateOutlet="action.tpl")

      ng-template(nzVirtualFor, [nzVirtualForOf]="source" let-virtual let-index="index" let-first="first" let-last="last" [fixedItemHeight]="48")
        .nz-list-item.item([style.gridRow]="offset(index)", [selectable]="virtual", [selectionIndex]="offset(index)")
          ng-template(
            bind-ngTemplateOutlet="itemTpl"
            bind-ngTemplateOutletContext="{$implicit:virtual}")

      ng-template(bind-ngIf="actionsByPosition.last")
        ng-template(ngFor bind-ngForOf="actionsByPosition.last" let-action let-index="index")
          .nz-list-item.item.action(
            [style.gridRow]="offset(index) + source.storage.lastIndex",
            [selectableAction]="action.model",
            [selectionIndex]="offset(index) + source.storage.lastIndex",
            color="light-accent")
            ng-template(bind-ngTemplateOutlet="action.tpl")

